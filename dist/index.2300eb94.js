class e{static getAllFiles(){return JSON.parse(localStorage.getItem("files")||"[]").sort(((e,t)=>new Date(e.updated)>new Date(t.updated)?1:-1))}static saveFile(t){const i=e.getAllFiles(),l=i.find((e=>e.id===t.id));l?(l.title=t.title,l.body=t.body,l.updated=(new Date).toISOString()):(t.id=Math.floor(1e6*Math.random()),t.updated=(new Date).toISOString(),i.push(t)),localStorage.setItem("files",JSON.stringify(i))}static deleteFile(t){const i=e.getAllFiles().filter((e=>e.id!=t));localStorage.setItem("files",JSON.stringify(i))}}class t{constructor(e,{onFileSelect:t,onFileAdd:i,onFileEdit:l,onFileDelete:n}={}){this.root=e,this.onFileSelect=t,this.onFileAdd=i,this.onFileEdit=l,this.onFileDelete=n,this.root.innerHTML='\n      <aside class="sidebar">\n        <div\n          class="app-name-box"\n        >\n        Journal App\n        </div>\n        <ul class="file-box"></ul>\n        <button class="add-file-btn">\n          <i class="fa-regular fa-plus"></i>\n        </button>\n      </aside>\n      <div class="journal-box">\n        <div class="journal-box--header">\n          <input\n            type="text"\n            class="journal-file-name"\n            value="Nome do Arquivo"\n          />\n          <div class="icons-div">\n            <svg\n              class="save-disk-icon"\n              xmlns="http://www.w3.org/2000/svg"\n              width="24"\n              height="24"\n              viewBox="0 0 24 24"\n            >\n              <path\n                d="M14 3h2.997v5h-2.997v-5zm9 1v20h-22v-24h17.997l4.003 4zm-17 5h12v-7h-12v7zm14 4h-16v9h16v-9z"\n              />\n            </svg>\n          </div>\n        </div>\n        <div class="journal-box--journal">\n          <div\n            class="journal-text-area"\n            contenteditable="true"\n            spellcheck="false"\n          ></div>\n        </div>\n      </div>\n    ';const s=this.root.querySelector(".journal-text-area"),o=this.root.querySelector(".journal-file-name"),r=this.root.querySelector(".add-file-btn"),a=this.root.querySelector(".save-disk-icon");r.addEventListener("click",(()=>{this.onFileAdd()})),[o,s].forEach((e=>{e.addEventListener("blur",(()=>{setTimeout((()=>{const e=o.value.trim(),t=s.innerHTML.trim();this.onFileEdit(e,t)}),500)}))})),a.addEventListener("click",(()=>{const e=o.value.trim(),t=s.innerHTML.trim();this.onFileEdit(e,t)})),document.addEventListener("keydown",(e=>{if(e.ctrlKey&&"s"===e.key){e.preventDefault();const t=o.value.trim(),i=s.innerHTML.trim();this.onFileEdit(t,i)}})),this.updateJournalVisibility(!1)}_createListItemHTML(e,t){return`\n    <li class="file-item" data-file-id="${e}">\n            <svg\n              clip-rule="evenodd"\n              fill-rule="evenodd"\n              stroke-linejoin="round"\n              stroke-miterlimit="2"\n              viewBox="0 0 24 24"\n              xmlns="http://www.w3.org/2000/svg"\n            >\n              <path\n                d="m10.211 7.155c-.141-.108-.3-.157-.456-.157-.389 0-.755.306-.755.749v8.501c0 .445.367.75.755.75.157 0 .316-.05.457-.159 1.554-1.203 4.199-3.252 5.498-4.258.184-.142.29-.36.29-.592 0-.23-.107-.449-.291-.591-1.299-1.002-3.945-3.044-5.498-4.243z"\n              />\n            </svg>\n            <span class="file-title">\n              ${t.substring(0,20)}\n              ${t.length>20?"...":""}\n            </span>\n          </li>\n    `}updateFileBoxList(e){const t=document.querySelector(".file-box");t.innerHTML="",e.forEach((e=>{const i=this._createListItemHTML(e.id,e.title);t.insertAdjacentHTML("beforeend",i)})),t.querySelectorAll(".file-item").forEach((e=>{e.addEventListener("click",(()=>{this.onFileSelect(e.dataset.fileId)})),e.addEventListener("contextmenu",(t=>{t.preventDefault();confirm("Tem certeza que deseja deletar este arquivo?")&&this.onFileDelete(e.dataset.fileId)}))}))}updateActiveFile(e){this.root.querySelector(".journal-file-name").value=e.title,this.root.querySelector(".journal-text-area").innerHTML=e.body,this.root.querySelectorAll(".file-item").forEach((e=>{e.classList.remove("active")})),this.root.querySelector(`.file-item[data-file-id="${e.id}"]`).classList.add("active")}updateJournalVisibility(e){this.root.querySelector(".journal-box").style.visibility=e?"visible":"hidden"}}const i=document.querySelector(".main");new class{constructor(e){this.files=[],this.activeFile=null,this.view=new t(e,this._handlers()),this._refreshFiles()}_refreshFiles(){const t=e.getAllFiles(),i=t.length-1;this._setFiles(t),t.length>0&&this._setActiveFile(t[i])}_setFiles(e){this.files=e,this.view.updateFileBoxList(e),this.view.updateJournalVisibility(e.length>0)}_setActiveFile(e){this.activeFile=e,this.view.updateActiveFile(e)}_handlers(){return{onFileSelect:e=>{const t=this.files.find((t=>t.id===+e));this._setActiveFile(t)},onFileAdd:()=>{e.saveFile({title:"Nome do arquivo...",body:"Comece a escrever!"}),this._refreshFiles()},onFileEdit:(t,i)=>{e.saveFile({id:this.activeFile.id,title:t,body:i}),this._refreshFiles()},onFileDelete:t=>{e.deleteFile(t),this._refreshFiles()}}}}(i);
//# sourceMappingURL=index.2300eb94.js.map
